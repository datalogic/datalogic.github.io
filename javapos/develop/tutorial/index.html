<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SQZ02Y9Z9X"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SQZ02Y9Z9X",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Technical Documentation" href="/opensearch.xml"><title data-react-helmet="true">Label Reader Tutorial | Technical Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Label Reader Tutorial | Technical Documentation"><meta data-react-helmet="true" name="description" content="This section covers a basic Java Application tutorial. The tutorial will demonstrate how to create a basic label reader application using Java and the Datalogic JavaPOS API."><meta data-react-helmet="true" property="og:description" content="This section covers a basic Java Application tutorial. The tutorial will demonstrate how to create a basic label reader application using Java and the Datalogic JavaPOS API."><meta data-react-helmet="true" property="og:url" content="https://datalogic.github.io/javapos/develop/tutorial"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://QFZ97LXSUQ-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://datalogic.github.io/javapos/develop/tutorial"><link rel="stylesheet" href="/styles.6e914616.css">
<link rel="preload" href="/styles.3a5c45b9.js" as="script">
<link rel="preload" href="/runtime~main.a1186dae.js" as="script">
<link rel="preload" href="/main.a11f05b8.js" as="script">
<link rel="preload" href="/1.ec2c912b.js" as="script">
<link rel="preload" href="/245.67337105.js" as="script">
<link rel="preload" href="/248.3233f063.js" as="script">
<link rel="preload" href="/935f2afb.123512cd.js" as="script">
<link rel="preload" href="/244.8f4dfef4.js" as="script">
<link rel="preload" href="/04f5a278.64fd582e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/homepage/datalogic.svg" alt="Datalogic Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/homepage/datalogic-dark.svg" alt="Datalogic Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Docs</strong></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Android SDKs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/android/">Datalogic Android SDK</a></li><li><a class="dropdown__link" href="/xamarin/">Xamarin SDK</a></li><li><a class="dropdown__link" href="/cordova/">Cordova SDK</a></li><li><a class="dropdown__link" href="/reactnative/">React Native SDK</a></li><li><a class="dropdown__link" href="/hhs/">Handheld Core SDK</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Android Config</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/scan2deploy/studio/">Scan2Deploy Studio</a></li><li><a class="dropdown__link" href="/dxu/">DXU</a></li><li><a class="dropdown__link" href="/oemconfig/">OEMConfig</a></li><li><a class="dropdown__link" href="/wifiqrdoc/">Wi-Fi QR Code Generator</a></li><li><a class="dropdown__link" href="/aeqrdoc/">Android Enterprise QR Code Generator</a></li><li><a class="dropdown__link" href="/m10ethcradle/">Memor 10 Ethernet Adapter Service Utility</a></li><li><a class="dropdown__link" href="/logger/">Datalogic Logger</a></li><li><a class="dropdown__link" href="/wifiguard/">Datalogic WiFi Guard</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Windows CE</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ce/">Windows CE SDK</a></li><li><a class="dropdown__link" href="/cesync/">Datalogic CE Sync</a></li><li><a class="dropdown__link" href="/scan2deploy-ce/">Scan2Deploy CE</a></li><li><a class="dropdown__link" href="/dxu/">DXU</a></li><li><a class="dropdown__link" href="/usblan/">USBLAN</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Point of Sale</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/javapos/overview">JavaPOS</a></li></ul></div><a class="navbar__item navbar__link" href="/releases">Releases</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/homepage/datalogic.svg" alt="Datalogic Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/homepage/datalogic-dark.svg" alt="Datalogic Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Android SDKs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/android/">Datalogic Android SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/xamarin/">Xamarin SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/cordova/">Cordova SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/reactnative/">React Native SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/hhs/">Handheld Core SDK</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Android Config</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/scan2deploy/studio/">Scan2Deploy Studio</a></li><li class="menu__list-item"><a class="menu__link" href="/dxu/">DXU</a></li><li class="menu__list-item"><a class="menu__link" href="/oemconfig/">OEMConfig</a></li><li class="menu__list-item"><a class="menu__link" href="/wifiqrdoc/">Wi-Fi QR Code Generator</a></li><li class="menu__list-item"><a class="menu__link" href="/aeqrdoc/">Android Enterprise QR Code Generator</a></li><li class="menu__list-item"><a class="menu__link" href="/m10ethcradle/">Memor 10 Ethernet Adapter Service Utility</a></li><li class="menu__list-item"><a class="menu__link" href="/logger/">Datalogic Logger</a></li><li class="menu__list-item"><a class="menu__link" href="/wifiguard/">Datalogic WiFi Guard</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Windows CE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ce/">Windows CE SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/cesync/">Datalogic CE Sync</a></li><li class="menu__list-item"><a class="menu__link" href="/scan2deploy-ce/">Scan2Deploy CE</a></li><li class="menu__list-item"><a class="menu__link" href="/dxu/">DXU</a></li><li class="menu__list-item"><a class="menu__link" href="/usblan/">USBLAN</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Point of Sale</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/javapos/overview">JavaPOS</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/releases">Releases</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">JavaPOS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB" tabindex="0">Distribution</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/distribution/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/distribution/installing">Installing Datalogic JavaPOS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/distribution/filesref">Installed Files Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/distribution/uninstalling">Uninstalling</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB" tabindex="0">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/brandproperties">brand.properties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/dlsproperties">dls.properties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/eciencodingcsv">ECIEncoding.csv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/ihsparsercsv">IHSParser.csv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/jposxml">jpos.xml</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/labelparsercsv">LabelIdentifiers.csv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/javaxusbproperties">javax.usb.properties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/jposproperties">jpos.properties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/configref/log4j2xml">log4j2.xml</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB" tabindex="0">Developing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/develop/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/develop/appintegrate">Application Integration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/javapos/develop/tutorial">Label Reader Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/develop/hellodatalogicjavapos">HelloDatalogicJavaPOS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/develop/barcodereaderexample">Barcode Reader Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/develop/hellojavaposscale">HelloJavaPOSScale</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/develop/liveweightexample">LiveWeightExample</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB" tabindex="0">Remote Management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/javapos/mbeans">MBeans</a></li></ul></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2Tub"></button></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Label Reader Tutorial</h1></header><div class="markdown"><p>This section covers a basic Java Application tutorial. The tutorial will demonstrate how to create a basic label reader application using Java and the Datalogic JavaPOS API.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="introduction"></a>Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>For this tutorial, we will be creating a simple console application in Java that opens, claims and enables a scanner device and provides a mechanism to see what labels were scanned with that device. This tutorial only covers a very basic aspect of development in JavaPOS, but should suffice as a starting point for any application that looks to read labels from a Datalogic scanning device.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prerequisites"></a>Prerequisites<a aria-hidden="true" class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>In order to develop an application for Datalogic Scanning devices, you will need to first have the supporting JAR libraries and configuration files needed for Datalogic JavaPOS present. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="support-libraries"></a>Support Libraries<a aria-hidden="true" class="hash-link" href="#support-libraries" title="Direct link to heading">#</a></h3><p>The easiest way to integrate JavaPOS into your application is to copy the entire SupportJars folder from the installed JavaPOS location to your project. This will add a SupportJars folder to your project and will contain all of the support libraries needed for JavaPOS. You will also need to copy the JavaPOS.jar file to your project. This file can be copied to the SupportJars folder if you wish, or can be copied to your application&#x27;s directory.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configuration-files"></a>Configuration Files<a aria-hidden="true" class="hash-link" href="#configuration-files" title="Direct link to heading">#</a></h3><p>In order for JavaPOS to operate correctly, you will need the configuration files that are installed with JavaPOS copied into your application&#x27;s directory.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="application-development"></a>Application Development<a aria-hidden="true" class="hash-link" href="#application-development" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-tutorial-class"></a>The Tutorial Class<a aria-hidden="true" class="hash-link" href="#the-tutorial-class" title="Direct link to heading">#</a></h3><p>In order to respond to JPOS events, your class will need to implement the jpos.events.DataListener interface in your class. This interface is part of the OMG JPOS 1.14 library (jpos114.jar). In order to implement the listener, you will also need to import the jpos.events.DataEvent class. Add the following imports to your class:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import jpos.events.DataEvent;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import jpos.events.DataListener;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now create your Tutorial class which implements the DataListener interface as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Tutorial implements DataListener {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void dataOccurred(DataEvent de) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Note that each time data is received from the Scanner device, the dataOccurred method will be called. This method is where we will put our label processing.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-scanner-implementation"></a>The Scanner implementation<a aria-hidden="true" class="hash-link" href="#the-scanner-implementation" title="Direct link to heading">#</a></h4><p>In order to program for a UPOS Scanner device, we will need to import the jpos.Scanner class. This class is the UPOS Scanner device implementation.</p><p>Add the following import to the Tutorial class:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import jpos.Scanner;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Next, we will add a member variable to the Tutorial class to hold the Scanner instance.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Tutorial implements DataListener {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private Scanner scanner;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Next, add a constructor for the Tutorial class that instantiates the Scanner instance as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Tutorial implements DataListener {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private Scanner scanner;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public Tutorial() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner = new Scanner();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now the Tutorial class has a member variable named scanner that holds a generic UPOS Scanner instance.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="open---claim---enable"></a>Open -&gt; Claim -&gt; Enable<a aria-hidden="true" class="hash-link" href="#open---claim---enable" title="Direct link to heading">#</a></h4><p>In order for an application to read labels using a UPOS Scanning device, the application must first open the UPOS device. The application must then claim the device. Finally, the application sends an enable command to the claimed device allowing the device to begin reading labels. Each step of this process is represented by a method within the UPOS Scanner class. Each of these methods potentially throws a JposException when they are called, so it is a good time to import jpos.JposException by adding the following to your Tutorial class imports:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import jpos.JposException;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="jposxml-profile"></a>jpos.xml Profile<a aria-hidden="true" class="hash-link" href="#jposxml-profile" title="Direct link to heading">#</a></h5><p>The JPOS Scanner.open method takes a single argument denoting the name of the jpos.xml Profile to use. This profile must match the <strong><em>logicalName</em></strong> attribute of a <strong>JposEntry</strong> element in the jpos.xml file. For this example, I will be using the default jpos.xml that is shipped with Datalogic JavaPOS, and I will be using the <strong>DL-Gryphon-GD4430-USB-OEM</strong> profile from jpos.xml. You can find the beginning of this profile by looking in the jpos.xml file, but it is included here as well.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;JposEntry logicalName=&quot;DL-Gryphon-GD4430-USB-OEM&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;creation factoryClass=&quot;com.dls.jpos.service.DLSScannerInstanceFactory&quot; serviceClass=&quot;com.dls.jpos.service.DLSScannerService&quot;/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;vendor name=&quot;DLA&quot; url=&quot;http://www.adc.datalogic.com&quot;/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;jpos category=&quot;Scanner&quot; version=&quot;1.13&quot;/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;product description=&quot;ScannerService&quot; name=&quot;ScannerService&quot; url=&quot;http://www.adc.datalogic.com&quot;/&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="connecting-to-the-device"></a>Connecting to the device<a aria-hidden="true" class="hash-link" href="#connecting-to-the-device" title="Direct link to heading">#</a></h5><p>Now that I have my profile selected, it is time to add a method for connecting to the Scanner device. Add a method to your class to encapsulate connecting to a Scanner device. This method should take a single parameter that contains the logicalName of the profile to use. This method should return a boolean indicating whether it succeeded in connecting to the device.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public boolean connectScanner(String profile) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Next, we will add the call to Scanner.open. Because this call can throw an exception, we will need to surround it in a try .. catch clause. If the device fails to open, we need to notify the user and return false. <em>Note that the call to open merely loads the jpos.xml profile and does not attempt to connect to the device. The only reason that this call should fail is if a <strong>JposEntry</strong> element could not be found with the profile name.</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public boolean connectScanner(String profile) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.open(profile);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException je) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to open profile: &quot; + profile + &quot;, &quot; + je);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>After the device profile has been loaded through the call to Scanner.open, it is time to claim the device using Scanner.claim. Like Scanner.open, Scanner.claim can throw an exception and will need to be surrounded in a try .. catch clause. There are a variety of reasons that a call to claim would throw an exception, so it is important to examine the exception thrown and close the device if an exception is thrown during the call to Scanner.claim.
The call to Scanner.claim takes a single integer argument indicating the number of milliseconds to wait before timeout when claiming a device. For the purpose of this tutorial, we will be using a fixed timeout of 1000 milliseconds or one second, but it is recommended that this argument be configurable externally so that the code does not have to be rebuilt to change the value.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public boolean connectScanner(String profile) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.open(profile);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException openx) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to open profile: &quot; + profile + &quot;, &quot; + openx);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.claim(1000);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException claimx) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to claim scanner: &quot; + claimx);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>At this point, it is time to enable the device. The Scanner device is enabled by a call to Scanner.setDeviceEnabled with the argument of true. The Scanner.setDeviceEnabled method can throw a JposException, so it is necessary to wrap it in a try .. catch clause. If the call fails, it will be necessary to close the scanner before returning false.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDeviceEnabled(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException enablex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to enable device: &quot; + enablex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The device should now be opened, claimed and enabled. However, there will be no data delivered from the device until the Data Event Enabled is set to true. This step is performed by a call to Scanner.setDataEventEnabled. Because Scanner.setDataEventEnabled can throw an exception, it is necessary to surround the statement in a try .. catch clause. Add the following code after the call to Scanner.setDeviceEnabled.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDataEventEnabled(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException datax) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to enable Data Events: &quot; + datax);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now that the scanner is opened, claimed, enabled and has Data Events enabled, the device can now start to deliver events to our application. In order to process those events, we will need to add our application as a data listener for the device. This will result in our dataOccurred method being called each time a data event is delivered from the device. Add the following to the end of your connectScanner method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.scanner.addDataListener(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return true;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Here is the completed Tutorial.connectScanner method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public boolean connectScanner(String profile) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.open(profile);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException openx) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to open profile: &quot; + profile + &quot;, &quot; + openx);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.claim(1000);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException claimx) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to claim scanner: &quot; + claimx);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDeviceEnabled(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException enablex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to enable device: &quot; + enablex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDataEventEnabled(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException datax) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to enable Data Events: &quot; + datax);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.scanner.addDataListener(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="disable---release---close"></a>Disable -&gt; Release -&gt; Close<a aria-hidden="true" class="hash-link" href="#disable---release---close" title="Direct link to heading">#</a></h4><p>Similar to the Open -&gt; Claim -&gt; Enable process, the Disable -&gt; Release -&gt; Close process is necessary to properly disconnect from the Scanner device. The UPOS Scanner class has methods for each of the steps to properly disconnect and the entire process should be encapsulated within a method similar to connectScanner. In this section, we will create a disconnectScanner method that facilitates this process. For the purpose of this tutorial, we will not be implementing any error handling outside of displaying the error that occurred, so there will be no need to return a value from this method.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void disconnectScanner() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The first thing that we need to do is remove our application as a Data listener. This will stop any calls to the dataOccured method in our application.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void disconnectScanner() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.scanner.removeDataListener(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>At this point, we will assume that the device is in the Device Enabled state. This means that the first thing that we will need to do is disable the device by calling the Scanner.setDeviceEnabled with false for the argument. This method can throw an exception, so we will need to surround it in a try .. catch clause. If an exception is thrown here, we will not return and instead carry on to the next step of the process.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDeviceEnabled(false);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException enablex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to disable device: &quot; + enablex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The device has now been returned to the Claimed state. The next step in the process is to release the device from our application. This is accomplished by calling the UPOS Scanner.release method. The release method can throw an exception, so we will need to surround it in a try .. catch clause. If an exception is thrown here, we will not return and instead carry on to the final step of the process.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.release();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException releasex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to release device: &quot; + releasex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The device has now been returned to the Open state. The final step in the process is to close the device from our application. This is accomplished by calling the UPOS Scanner.close method. The close method can throw an exception, so we will need to surround it in a try .. catch clause. If an exception is thrown here, we will not return as there is no further action to be taken.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now we have a method to properly disconnect from the device. The error handling is very simple, but suffices for the purpose of this tutorial. Here is the entire disconnectScanner method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void disconnectScanner() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    this.scanner.removeDataListener(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDeviceEnabled(false);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException enablex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to disable device: &quot; + enablex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.release();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException releasex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to release device: &quot; + releasex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.close();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException closex) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to close device: &quot; + closex);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="data-events"></a>Data Events<a aria-hidden="true" class="hash-link" href="#data-events" title="Direct link to heading">#</a></h4><p>A Data Event is produced each time data is received from the Scanner device. For the purpose of this tutorial, we are going to concentrate on gathering Label events and ignore all other types of Data events. We have already implemented the dataOccurred event as part of implementing the DataListener interface. Each time a Label is scanned using a Scanner device, a Data Event occurs, and our dataOccurred method is called.</p><p>With Label data, we are concerned with three pieces of data: the raw Label data, the decoded Label data and the Label type. The UPOS Scanner class provides three methods to obtain this data. Scanner.getScanData returns a byte array containing the raw Label data. Scanner.getScanDataLabel returns a byte array containing the decoded Label data. Scanner.getScanDataType returns an integer denoting the symbology used to encode the Label data.</p><p>We will now expand our dataOccurred method by adding local variables to hold the potential label data during each Data Event. Add the following to your dataOccurred method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void dataOccurred(DataEvent de) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    byte[] scanData = new byte[]{};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    byte[] scanDataLabel = new byte[]{};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int scanDataType = -1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The three methods used to populate our local variables are each methods that can throw an exception. It is usually not best practice to group statements into a single try .. catch clause, in this particular case, we will be grouping the three calls into a single try .. catch for brevity and clarity.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        scanData = this.scanner.getScanData();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        scanDataLabel = this.scanner.getScanDataLabel();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        scanDataType = this.scanner.getScanDataType();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException scannerx) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: JPOS Exception during data event: &quot; + scannerx);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>At this point, any sort of Data event may have been triggered. Calling each of these three methods will return a value regardless of whether a label event occurred. We are only interested in Scanned Label Events for the purpose of this tutorial, so we will test the length of the local scanData byte array to determine if we have any scan data, and display the information that was returned from the Scanner to the user. Add the following to your dataOccurred method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (scanData.length &gt; 0) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        String sData = new String(scanData);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        String sLabel = new String(scanDataLabel);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(&quot;Raw Data: &quot; + sData + &quot;, Label Data: &quot; + sLabel +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;, Type: &quot; + scanDataType);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now when a label is scanned, our event handler will output the data from the label. By default, the Data Event Enable is automatically set to false each time a Data Event is delivered. In order to get another label to read, we will need to set the Data Event Enabled to true again. Each time a data event is delivered, we need to repeat this process. As before, the Scanner.setDataEventEnabled can throw an exception, so we will surround it in a try .. catch clause.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDataEventEnabled(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException datax) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to enable Data Events. &quot; + datax);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now our event handler displays label events for the user and enables Data Events for another label read. The complete dataOccurred method is here for reference:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void dataOccurred(DataEvent de) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    byte[] scanData = new byte[]{};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    byte[] scanDataLabel = new byte[]{};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int scanDataType = -1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        scanData = this.scanner.getScanData();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        scanDataLabel = this.scanner.getScanDataLabel();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        scanDataType = this.scanner.getScanDataType();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException scannerx) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: JPOS Exception during data event: &quot; + scannerx);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (scanData.length &gt; 0) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        String sData = new String(scanData);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        String sLabel = new String(scanDataLabel);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(&quot;Raw Data: &quot; + sData + &quot;, Label Data: &quot; + sLabel +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;, Type: &quot; + scanDataType);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        this.scanner.setDataEventEnabled(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (JposException datax) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.err.println(&quot;ERROR: Failed to enable Data Events. &quot; + datax);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-main-method"></a>The main method<a aria-hidden="true" class="hash-link" href="#the-main-method" title="Direct link to heading">#</a></h4><p>Now it is time to tie everything together into a working console application. We will now add a main method to our class to allow this tutorial to be launched from the command line. For the purpose of this tutorial, we will be creating a simple loop waiting for the user to press the Enter key. Until the user has pressed this key, the application will continue to read and display label events. Add a main method to your Tutorial class as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Tutorial tutorial = new Tutorial();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>As mentioned previously, we will be using the <strong>DL-Gryphon-GD4430-USB-OEM</strong> profile from the default <strong>jpos.xml</strong> file that is distributed with JavaPOS. If you have a different device that you are writing for, change this to the name of the profile that you are using in your <strong>jpos.xml</strong>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Tutorial tutorial = new Tutorial();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    String profileName = &quot;DL-Gryphon-GD4430-USB-OEM&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The next step is to connect to the scanner. We will be testing the boolean returned by the Tutorial.connectScanner method to determine whether the device is connected before proceeding. If the device does not connect, there is no reason to continue executing, so we will simply exit if Tutorial.connectScanner fails.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!tutorial.connectScanner(profileName)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.exit(1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-a-bufferedreader"></a>Using a BufferedReader<a aria-hidden="true" class="hash-link" href="#using-a-bufferedreader" title="Direct link to heading">#</a></h5><p>For our main loop, we will be using a BufferedReader instance to read from an InputStreamReader instance that is attached to System.in. This will allow us to read input from the console and determine when to stop executing. In order to use these classes, the following imports will need to be added to the <strong>Tutorial</strong> class:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.BufferedReader;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.IOException;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.InputStreamReader;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Now we will add our loop to the main method after our call to Tutorial.connect.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    while (true) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(&quot;Press Enter to exit.&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            reader.readLine();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (IOException iox) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: I/O Exception reading from System.in: &quot; + iox);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Once the user has pressed Enter and is exiting the program, we will need to go ahead and disconnect from the scanner. Add the following to your main method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    tutorial.disconnectScanner();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(&quot;Disconnected from device.&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    System.exit(0);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Here is the completed Tutorial.main method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Tutorial tutorial = new Tutorial();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    String profileName = &quot;DL-Gryphon-GD4430-USB-OEM&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!tutorial.connectScanner(profileName)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.exit(1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    while (true) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(&quot;Press Enter to exit.&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            reader.readLine();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (IOException iox) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            System.err.println(&quot;ERROR: I/O Exception reading from System.in: &quot; + iox);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    tutorial.disconnectScanner();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(&quot;Disconnected from device.&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    System.exit(0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="summary"></a>Summary<a aria-hidden="true" class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>We have now created a simple application that will allow a user to connect to a Scanner device, display Label events until the user presses Enter and then disconnect from the Scanner device. This is, of course, a very minimal example and does not cover the full capabilities of the Datalogic JavaPOS API, however, it serves as an excellent starting point for applications that use the Datalogic JavaPOS API.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/javapos/develop/appintegrate"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Application Integration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/javapos/develop/hellodatalogicjavapos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HelloDatalogicJavaPOS Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a><ul><li><a href="#support-libraries" class="table-of-contents__link">Support Libraries</a></li><li><a href="#configuration-files" class="table-of-contents__link">Configuration Files</a></li></ul></li><li><a href="#application-development" class="table-of-contents__link">Application Development</a><ul><li><a href="#the-tutorial-class" class="table-of-contents__link">The Tutorial Class</a></li></ul></li><li><a href="#summary" class="table-of-contents__link">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Developer Links</h4><ul class="footer__items"><li class="footer__item"><a href="https://developer.datalogic.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Site</a></li><li class="footer__item"><a href="https://github.com/datalogic" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Notices</h4><ul class="footer__items"><li class="footer__item"><a href="http://www.datalogic.com/eng/legal-notice-pa-92.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legal Notice</a></li><li class="footer__item"><a href="http://www.datalogic.com/eng/privacy-policy-pa-112.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="http://www.datalogic.com/eng/terms-and-conditions-pa-93.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms and Conditions</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social Media</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.facebook.com/DatalogicGroup/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://twitter.com/DatalogicGroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/datalogic" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/user/DatalogicGroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2022 Datalogic Inc.<br><br>Built with Docusaurus. All rights reserved. Datalogic and the Datalogic logo are registered trademarks of Datalogic S.p.A. in many countries including the U.S.A. and the E.U. All other trademarks are the property of their respective owners.</div></div></div></footer></div>
<script src="/styles.3a5c45b9.js"></script>
<script src="/runtime~main.a1186dae.js"></script>
<script src="/main.a11f05b8.js"></script>
<script src="/1.ec2c912b.js"></script>
<script src="/245.67337105.js"></script>
<script src="/248.3233f063.js"></script>
<script src="/935f2afb.123512cd.js"></script>
<script src="/244.8f4dfef4.js"></script>
<script src="/04f5a278.64fd582e.js"></script>
</body>
</html>