"use strict";(self.webpackChunkdatalogic_github_io=self.webpackChunkdatalogic_github_io||[]).push([[92935],{96720:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var a=n(85893),r=n(11151),o=n(74866),l=n(85162);n(9286);const s={id:"api",title:"Logger API",sidebar_label:"Logger API"},i=void 0,c={id:"logger/api",title:"Logger API",description:"Command Intents",source:"@site/docs/logger/api.mdx",sourceDirName:"logger",slug:"/logger/api",permalink:"/logger/api",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"api",title:"Logger API",sidebar_label:"Logger API"},sidebar:"Logger",previous:{title:"Managing Log Archives",permalink:"/logger/archives"}},d={},u=[{value:"Command Intents",id:"command-intents",level:2},{value:"Start a Log Session",id:"start-a-log-session",level:3},{value:"Stop a Log Session",id:"stop-a-log-session",level:3},{value:"Export Latest Log Archive",id:"export-latest-log-archive",level:3},{value:"Sample code",id:"sample-code",level:3}];function g(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"command-intents",children:"Command Intents"}),"\n",(0,a.jsx)(t.p,{children:"Applications can send commands to Datalogic Logger through a set of API intents.  These intents perform the same actions that are available through the Logger application.  They can be useful to issues commands in response to a system event, such as the start of a user login, or the reporting of an error."}),"\n",(0,a.jsx)(t.p,{children:"To avoid the potential for any application other than Datalogic Logger from processing the Intent, all intents should be created using the following package name for the recipient:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"com.datalogic.logger"})}),"\n",(0,a.jsx)(t.p,{children:"The available intents with specific details on their behavior are listed below."}),"\n",(0,a.jsx)(t.h3,{id:"start-a-log-session",children:"Start a Log Session"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Action:"})," ",(0,a.jsx)(t.code,{children:"com.datalogic.logger.START_LOG"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Data:"})," None"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Extra Data:"})," None"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"A new log session is started using the existing configuration settings.  If the logging service is busy (already running), this command will be ignored."}),"\n",(0,a.jsx)(t.p,{children:"If this command is issued early during a device reboot, any unsaved log content from a previous session (due to a system crash) will be archived before starting a new session."}),"\n",(0,a.jsx)(t.h3,{id:"stop-a-log-session",children:"Stop a Log Session"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Action:"})," ",(0,a.jsx)(t.code,{children:"com.datalogic.logger.STOP_LOG"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Data:"})," None"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Extra Data:"})," None"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Any current log session is stopped, and an archive file of the log content will be created.  If no log session was currently active, this command will be ignored."}),"\n",(0,a.jsx)(t.h3,{id:"export-latest-log-archive",children:"Export Latest Log Archive"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Action:"})," ",(0,a.jsx)(t.code,{children:"com.datalogic.logger.EXPORT_LOG"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Data:"})," None"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Intent Extra Data:"})," Optional","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Key Name:"})," ",(0,a.jsx)(t.code,{children:"url"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Type:"})," String"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Description:"})," If included, this specifies the server URL to use for exporting the archive.  If not included, the existing configuration setting will be used."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"The most recent archive on the device will be exported to the server URL specified by the current configuration setting (or the URL specified by the optional extra data in the intent).  Any archive that is already queued for export will not be considered in selecting the most recent archive.  If no archive exists, this command will be ignored."}),"\n",(0,a.jsx)(t.p,{children:"If this command is issued early during a device reboot, any unsaved log content from a previous session (due to a system crash) will be archived and then selected to be exported."}),"\n",(0,a.jsx)(t.h3,{id:"sample-code",children:"Sample code"}),"\n",(0,a.jsx)(t.p,{children:"The following code fragment illustrates how to issue each of the logger intents from an activity."}),"\n","\n",(0,a.jsxs)(o.Z,{defaultValue:"kotlin",values:[{label:"Kotlin",value:"kotlin"},{label:"Java",value:"java"},{label:"ADB",value:"adb"}],children:[(0,a.jsx)(l.Z,{value:"kotlin",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-kotlin",children:'fun logDemo()\n{\n    val logPackage = "com.datalogic.logger"\n\n    // Create/Send intent to start a log session.\n    val startLog = Intent("com.datalogic.logger.START_LOG")\n    startLog.setPackage(logPackage)\n    sendBroadcast(startLog)\n\n    // Create/Send intent to stop a log session.\n    val stopLog = Intent("com.datalogic.logger.STOP_LOG")\n    stopLog.setPackage(logPackage)\n    sendBroadcast(stopLog)\n\n    // Create/Send intent to export log files to a specific URL.\n    val exportLog = Intent("com.datalogic.logger.EXPORT_LOG")\n    val serverUrl = "https://www.myserver.com/logUploads"\n    exportLog.setPackage(logPackage)\n    exportLog.putExtra("url", serverUrl)\n    sendBroadcast(exportLog)\n}\n'})})}),(0,a.jsx)(l.Z,{value:"java",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'void logDemo()\n{\n    String logPackage = "com.datalogic.logger";\n\n    // Create/Send intent to start a log session.\n    Intent startLog = new Intent("com.datalogic.logger.START_LOG");\n    startLog.setPackage(logPackage);\n    sendBroadcast(startLog);\n\n    // Create/Send intent to stop a log session.\n    Intent stopLog = new Intent("com.datalogic.logger.STOP_LOG");\n    stopLog.setPackage(logPackage);\n    sendBroadcast(stopLog);\n\n    // Create/Send intent to export log files to a specific URL.\n    Intent exportLog = new Intent("com.datalogic.logger.EXPORT_LOG");\n    String serverUrl = "https://www.myserver.com/logUploads";\n    exportLog.setPackage(logPackage);\n    exportLog.putExtra("url", serverUrl);\n    sendBroadcast(exportLog);\n}\n'})})}),(0,a.jsx)(l.Z,{value:"adb",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:'Start logging:\nadb shell am broadcast -a com.datalogic.logger.START_LOG com.datalogic.logger\n\nStop logging:\nadb shell am broadcast -a com.datalogic.logger.STOP_LOG com.datalogic.logger\n\nExport archives to URL:\nadb shell am broadcast -a com.datalogic.logger.EXPORT_LOG com.datalogic.logger --es url "https://www.myserver.com/logUploads"\n'})})})]})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}},85162:(e,t,n)=>{n.d(t,{Z:()=>l});n(67294);var a=n(36905);const r={tabItem:"tabItem_Ymn6"};var o=n(85893);function l(e){let{children:t,hidden:n,className:l}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,l),hidden:n,children:t})}},74866:(e,t,n)=>{n.d(t,{Z:()=>I});var a=n(67294),r=n(36905),o=n(12466),l=n(16550),s=n(20469),i=n(91980),c=n(67392),d=n(50012);function u(e){var t,n;return null!=(t=null==(n=a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function g(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=null!=t?t:function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const r=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,i._X)(o),(0,a.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,o=g(e),[l,i]=(0,a.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const r=null!=(t=a.find((e=>e.default)))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[c,u]=p({queryString:n,groupId:r}),[m,v]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[r,o]=(0,d.Nk)(n);return[r,(0,a.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:r}),f=(()=>{const e=null!=c?c:m;return h({value:e,tabValues:o})?e:null})();(0,s.Z)((()=>{f&&i(f)}),[f]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error("Can't select invalid tab value="+e);i(e),u(e),v(e)}),[u,v,o]),tabValues:o}}var v=n(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(85893);function b(e){let{className:t,block:n,selectedValue:a,selectValue:l,tabValues:s}=e;const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),d=e=>{const t=e.currentTarget,n=i.indexOf(t),r=s[n].value;r!==a&&(c(t),l(r))},u=e=>{var t;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var a;const t=i.indexOf(e.currentTarget)+1;n=null!=(a=i[t])?a:i[0];break}case"ArrowLeft":{var r;const t=i.indexOf(e.currentTarget)-1;n=null!=(r=i[t])?r:i[i.length-1];break}}null==(t=n)||t.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t),children:s.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>i.push(e),onKeyDown:u,onClick:d,...o,className:(0,r.Z)("tabs__item",f.tabItem,null==o?void 0:o.className,{"tabs__item--active":a===t}),children:null!=n?n:t},t)}))})}function j(e){let{lazy:t,children:n,selectedValue:r}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function L(e){const t=m(e);return(0,x.jsxs)("div",{className:(0,r.Z)("tabs-container",f.tabList),children:[(0,x.jsx)(b,{...t,...e}),(0,x.jsx)(j,{...t,...e})]})}function I(e){const t=(0,v.Z)();return(0,x.jsx)(L,{...e,children:u(e.children)},String(t))}}}]);