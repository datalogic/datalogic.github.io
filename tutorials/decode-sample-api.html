---
layout: tutorial
title: Decode Sample API

tutorial_enabled: false
tutorial_difficulty: 2
tutorial_icon: barcode
tutorial_suggested:
    - Decode Listener

excerpt: "[TODO] Use Datalogic decoding API"
---

<h2>Settings Activity</h2>

<p>The class <code>com.datalogic.examples.decodesampleapi.SettingsActivity</code> handles the
application settings following Android guidelines as explained in
<a href="http://developer.android.com/guide/topics/ui/settings.html">Settings API Guide</a>.
The settings are defined in xml files in the folder <code>res/xml/</code>.
</p>

<h2>Scanner Service</h2>

<p>The class <code>com.datalogic.examples.decodesampleapi.ScannerService</code> implements
an Android {% include man-link-android.html uri='android.app.Service' %} which
is able to read barcodes when the application is not in foreground.</p>

<p>To use barcode listeners in a service, just register them as in any other Activity, the only
difference is the entry point, which in the case of services is <code>onStartCommand</code>:</p>
{% highlight java %}
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    try {
        BarcodeManager decoder = new BarcodeManager();
        decoder.addReadListener(this);
        decoder.addStartListener(this);
        decoder.addStopListener(this);
        decoder.addTimeoutListener(this);
        decoder.startDecode(5000);
        
    } catch (DecodeException e) {
        e.printStackTrace();
    }
    
    Log.d(MainActivity.TAG, "End service scan.");
    return Service.START_NOT_STICKY;
}
{% endhighlight %}

Android services must be declared in <code>AndroidManifest.xml</code>:
{% highlight xml %}
<service
    android:name="com.datalogic.examples.decodesampleapi.ScannerService"
    android:enabled="true" >
</service>
{% endhighlight %}
